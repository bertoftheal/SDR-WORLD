<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDR World</title>
    <style>
        /* Custom styling for insights navigation */
        .insights-nav .list-group-item.active {
            background-color: #06b6a2 !important;
            border-color: #06b6a2 !important;
            color: white !important;
        }
        
        .insights-nav .list-group-item:hover {
            background-color: #06b6a2 !important;
            border-color: #06b6a2 !important;
            color: white !important;
        }
        
        /* Animation for highlighting updated elements */
        .highlight-update {
            animation: highlightFade 2s ease;
        }
        
        @keyframes highlightFade {
            0% { background-color: rgba(6, 182, 162, 0.3); }
            100% { background-color: transparent; }
        }
        
        /* Make sure the company description paragraph is easily visible */
        p.mb-0 {
            min-height: 60px;
            padding: 10px;
            border-radius: 4px;
            transition: background-color 0.3s ease;
        }
    </style>
    <link rel="stylesheet" href="/static/styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Add Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- Standardized Navigation -->
        <nav class="navbar navbar-expand-lg sticky-top shadow-sm bg-white py-3">
            <div class="container">
                <a class="navbar-brand d-flex align-items-center" href="home.html">
                    <div class="brand-icon rounded-circle p-2 me-2" style="background-color: #06b6a2; color: white;">
                        <i class="fas fa-globe-americas"></i>
                    </div>
                    <span class="fw-bold">SDR World</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item mx-2">
                            <a class="nav-link fw-medium" href="home.html" id="nav-home">
                                <i class="fas fa-home me-1"></i> HOME
                            </a>
                        </li>
                        <li class="nav-item mx-2">
                            <a class="nav-link fw-medium" href="index.html" id="nav-research">
                                <i class="fas fa-search me-1"></i> RESEARCH
                            </a>
                        </li>
                        <li class="nav-item mx-2">
                            <a class="nav-link fw-medium" href="accounts.html">
                                <i class="fas fa-users me-1"></i> ACCOUNTS
                            </a>
                        </li>
                        <li class="nav-item mx-2">
                            <a class="nav-link fw-medium" href="library.html">
                                <i class="fas fa-book me-1"></i> LIBRARY
                            </a>
                        </li>
                        <li class="nav-item mx-2">
                            <a class="nav-link fw-medium" href="dashboard.html">
                                <i class="fas fa-chart-line me-1"></i> DASHBOARD
                            </a>
                        </li>
                    </ul>
                    <div class="d-flex align-items-center">
                        <button id="loginButton" class="btn rounded-pill px-4" style="background-color: #06b6a2; color: white;">
                            <i class="fas fa-user-circle me-2"></i>Sign In
                        </button>
                        <div id="userInfo">
                            <div class="d-flex align-items-center">
                                <div class="user-avatar text-white rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 36px; height: 36px; background-color: #06b6a2;">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="me-3">
                                    <div class="fw-bold" id="userName">Albert Perez</div>
                                    <div class="text-muted small">Pro Member</div>
                                </div>
                                <div class="dropdown">
                                    <button class="btn btn-link dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                                        <li><a class="dropdown-item" href="#profile"><i class="fas fa-user-cog me-2"></i>Profile</a></li>
                                        <li><a class="dropdown-item" href="#settings"><i class="fas fa-cog me-2"></i>Settings</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item text-danger" href="#" onclick="logout()"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <div class="container px-4 py-5">
            <!-- Hero Section -->
            <div class="hero-section py-4 mb-5">
                <div class="row align-items-center g-5">
                    <div class="col-lg-6">
                        <div class="contact-section">
                            <div class="section-label badge mb-3 px-3 py-2" style="background-color: #06b6a2;">SALES RESEARCH</div>
                            <h1 class="display-4 fw-bold mb-4">Discover insights for meaningful conversations</h1>
                            <p class="lead mb-4 text-muted">Generate AI-powered company research to engage prospects with personalized, data-driven talk tracks.</p>
                            
                            <!-- Account Search Area -->
                            <div class="search-container p-4 bg-light rounded shadow-sm">
                                <div class="form-group mb-4">
                                    <label for="accountSelect" class="fw-bold text-uppercase small mb-2"><i class="fas fa-building me-2"></i>COMPANY NAME</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control form-control-lg" id="accountSelect" placeholder="Enter company name (e.g., Microsoft, Apple)" oninput="updateLogoImage(this.value)">
                                        <div class="input-group-text bg-light">
                                            <i class="fas fa-search"></i>
                                        </div>
                                    </div>
                                </div>
                                <button class="btn btn-lg w-100 generate-btn" id="generateBtn" style="background-color: #06b6a2; color: white;" onclick="updateCompanyDescription()">
                                    <i class="fas fa-search me-2"></i>GENERATE RESEARCH
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="hero-image position-relative">
                            <div class="position-absolute top-0 start-0 translate-middle badge rounded-pill bg-danger p-3 fw-bold" style="z-index: 1">
                                <i class="fas fa-bolt me-1"></i> AI POWERED
                            </div>
                            <img src="https://images.unsplash.com/photo-1600880292203-757bb62b4baf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80" alt="Research Team Collaborating" class="img-fluid rounded shadow" id="companyLogo">
                            <div class="image-caption badge bg-dark bg-opacity-75 text-white py-2 px-3 position-absolute bottom-0 end-0 m-3 rounded-pill">
                                <i class="fas fa-robot me-2"></i> DIGITAL RESEARCH BASED AI BUILT-IN
                            </div>
                        </div>
                        <div class="social-links mt-4 d-flex justify-content-center">
                            <span class="me-3 text-muted">FOLLOW US ON</span>
                            <a href="#" class="me-3 text-decoration-none"><i class="fab fa-twitter"></i></a>
                            <a href="#" class="me-3 text-decoration-none"><i class="fab fa-instagram"></i></a>
                            <a href="#" class="me-3 text-decoration-none"><i class="fab fa-linkedin"></i></a>
                            <a href="#" class="text-decoration-none"><i class="fab fa-behance"></i></a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Company Information -->
            <div class="row mb-5" id="company-info">
                <div class="col-12">
                    <div class="company-header p-4 rounded shadow-sm bg-light">
                        <div class="d-flex align-items-center mb-4">
                            <div class="company-logo me-3 rounded-circle d-flex align-items-center justify-content-center" style="width: 60px; height: 60px; background-color: #06b6a2;">
                                <i class="fas fa-building text-white fa-2x"></i>
                            </div>
                            <h1 class="company-name mb-0">Cisco Systems</h1>
                            <span class="badge bg-success ms-3 align-self-start">Active Research</span>
                        </div>
                        
                        <div class="company-meta-grid row row-cols-1 row-cols-md-4 g-4 mb-4">
                            <div class="col-4 px-2">
                                <div class="company-meta-item card h-100 border-0 bg-transparent">
                                    <div class="card-body">
                                        <h5 class="meta-label mb-2" style="color: #06b6a2;"><i class="fas fa-map-marker-alt me-2"></i>Headquarters</h5>
                                        <div class="meta-value fw-bold">San Jose, California, United States</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 px-2">
                                <div class="company-meta-item card h-100 border-0 bg-transparent">
                                    <div class="card-body">
                                        <h5 class="meta-label mb-2" style="color: #06b6a2;"><i class="fas fa-users me-2"></i>Employees</h5>
                                        <div class="meta-value fw-bold">83,300+</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 px-2">
                                <div class="company-meta-item card h-100 border-0 bg-transparent">
                                    <div class="card-body">
                                        <h5 class="meta-label mb-2" style="color: #06b6a2;"><i class="fas fa-chart-line me-2"></i>Market Cap</h5>
                                        <div class="meta-value fw-bold">$198.5 Billion</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 px-2">
                                <div class="company-meta-item card h-100 border-0 bg-transparent">
                                    <div class="card-body">
                                        <h5 class="meta-label mb-2" style="color: #06b6a2;"><i class="fas fa-calendar-alt me-2"></i>Founded</h5>
                                        <div class="meta-value fw-bold">1984</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="company-description p-3 border-top pt-4">
                            <h5 class="mb-3"><i class="fas fa-info-circle me-2"></i>Company Overview</h5>
                            <p class="mb-0">Cisco Systems, Inc. designs, manufactures, and sells Internet Protocol based networking and other products related to the communications and information technology industry worldwide. The company offers switching products, including fixed-configuration and modular switches, and storage products that provide connectivity to end users, workstations, IP phones, wireless access points, and servers.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Our Insights Section -->
            <div class="row mb-5" id="research">
                <div class="col-lg-3">
                    <div class="sticky-top" style="top: 20px;">
                        <div class="section-label badge mb-3 px-3 py-2" style="background-color: #06b6a2;">INTELLIGENCE</div>
                        <h2 class="display-6 fw-bold mb-4">Company Research Insights</h2>
                        <p class="text-muted mb-4">AI-generated intelligence to help you understand the company, industry trends, and future vision.</p>
                        <div class="insights-nav list-group mb-4">
                            <a href="#company-insights" class="list-group-item list-group-item-action d-flex align-items-center active">
                                <i class="fas fa-building me-3"></i>Company Insights
                            </a>
                            <a href="#industry-insights" class="list-group-item list-group-item-action d-flex align-items-center">
                                <i class="fas fa-industry me-3"></i>Industry Insights
                            </a>
                            <a href="#future-insights" class="list-group-item list-group-item-action d-flex align-items-center">
                                <i class="fas fa-lightbulb me-3"></i>Future Vision
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-9">
                    <!-- Company Insights Section -->
                    <div id="company-insights" class="insights-section company-insights mb-5">
                        <div class="section-header d-flex align-items-center bg-light p-3 rounded-top border-start border-5" style="border-color: #06b6a2 !important;">
                            <div class="header-icon me-3 text-white p-2 rounded" style="background-color: #06b6a2;">
                                <i class="fas fa-building fa-lg"></i>
                            </div>
                            <h2 class="mb-0">Company Insights</h2>
                        </div>
                        <div class="insights-grid d-flex flex-nowrap mt-1">
                            <div class="col-4 px-2">
                                <div class="insight-box h-100 card shadow-sm">
                                    <div class="card-header insight-header text-white" style="background-color: #06b6a2;">
                                        <i class="fas fa-chart-line me-2"></i>
                                        <span class="fw-bold">Financial Performance</span>
                                    </div>
                                    <div class="card-body insight-content">
                                        <h5 class="insight-header-text mb-3">Strong recurring revenue growth</h5>
                                        <p class="insight-body-text mb-0">Cisco has been successfully transitioning to a subscription-based model, with software and services now representing over 50% of their revenue, providing more stable and predictable income streams.</p>
                                    </div>
                                    <div class="card-footer text-end bg-white">
                                        <span class="badge rounded-pill bg-success"><i class="fas fa-arrow-up me-1"></i> Positive Trend</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 px-2">
                                <div class="insight-box h-100 card shadow-sm">
                                    <div class="card-header insight-header text-white" style="background-color: #06b6a2;">
                                        <i class="fas fa-cubes me-2"></i>
                                        <span class="fw-bold">Product Portfolio</span>
                                    </div>
                                    <div class="card-body insight-content">
                                        <h5 class="insight-header-text mb-3">Expanded beyond networking hardware</h5>
                                        <p class="insight-body-text mb-0">While traditionally known for routers and switches, Cisco has diversified into cybersecurity, collaboration tools, and IoT, reducing dependence on hardware sales which are susceptible to market fluctuations.</p>
                                    </div>
                                    <div class="card-footer text-end bg-white">
                                        <span class="badge rounded-pill bg-info"><i class="fas fa-sync-alt me-1"></i> Transition</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 px-2">
                                <div class="insight-box h-100 card shadow-sm">
                                    <div class="card-header insight-header text-white" style="background-color: #06b6a2;">
                                        <i class="fas fa-users me-2"></i>
                                        <span class="fw-bold">Key Leadership</span>
                                    </div>
                                    <div class="card-body insight-content">
                                        <h5 class="insight-header-text mb-3">Strategic executive appointments</h5>
                                        <p class="insight-body-text mb-0">Under CEO Chuck Robbins, Cisco has made strategic executive appointments focused on accelerating software development and cloud-based solutions, signaling their commitment to digital transformation.</p>
                                    </div>
                                    <div class="card-footer text-end bg-white">
                                        <span class="badge rounded-pill bg-success"><i class="fas fa-check me-1"></i> Key Insight</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Industry Insights Section -->
                    <div id="industry-insights" class="insights-section industry-insights mb-5">
                        <div class="section-header d-flex align-items-center bg-light p-3 rounded-top border-start border-5" style="border-color: #06b6a2 !important;">
                            <div class="header-icon me-3 text-white p-2 rounded" style="background-color: #06b6a2;">
                                <i class="fas fa-industry fa-lg"></i>
                            </div>
                            <h2 class="mb-0">Industry Insights</h2>
                        </div>
                        <div class="insights-grid d-flex flex-nowrap mt-1">
                            <div class="col-4 px-2">
                                <div class="insight-box h-100 card shadow-sm">
                                    <div class="card-header insight-header text-white" style="background-color: #06b6a2;">
                                        <i class="fas fa-cloud me-2"></i>
                                        <span class="fw-bold">Cloud Infrastructure</span>
                                    </div>
                                    <div class="card-body insight-content">
                                        <h5 class="insight-header-text mb-3">Hybrid cloud adoption accelerating</h5>
                                        <p class="insight-body-text mb-0">Enterprise customers are increasingly adopting hybrid cloud architectures that require sophisticated networking solutions to ensure seamless connectivity and security between on-premises and cloud environments.</p>
                                    </div>
                                    <div class="card-footer text-end bg-white">
                                        <span class="badge rounded-pill bg-success"><i class="fas fa-arrow-up me-1"></i> Growing Trend</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 px-2">
                                <div class="insight-box h-100 card shadow-sm">
                                    <div class="card-header insight-header text-white" style="background-color: #06b6a2;">
                                        <i class="fas fa-shield-alt me-2"></i>
                                        <span class="fw-bold">Cybersecurity Landscape</span>
                                    </div>
                                    <div class="card-body insight-content">
                                        <h5 class="insight-header-text mb-3">Rising security concerns with distributed networks</h5>
                                        <p class="insight-body-text mb-0">With the rise of remote work, organizations face expanded attack surfaces, driving 27% annual growth in network security spending according to Gartner, particularly for solutions that integrate with existing network infrastructure.</p>
                                    </div>
                                    <div class="card-footer text-end bg-white">
                                        <span class="badge rounded-pill bg-danger"><i class="fas fa-exclamation-triangle me-1"></i> Critical Need</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 px-2">
                                <div class="insight-box h-100 card shadow-sm">
                                    <div class="card-header insight-header text-white" style="background-color: #06b6a2;">
                                        <i class="fas fa-network-wired me-2"></i>
                                        <span class="fw-bold">Networking Trends</span>
                                    </div>
                                    <div class="card-body insight-content">
                                        <h5 class="insight-header-text mb-3">Software-defined networking becoming standard</h5>
                                        <p class="insight-body-text mb-0">SDN and intent-based networking are replacing traditional hardware-centric approaches, with IDC predicting that 60% of enterprises will implement fully software-defined networks by 2025 to improve agility and reduce operational costs.</p>
                                    </div>
                                    <div class="card-footer text-end bg-white">
                                        <span class="badge rounded-pill" style="background-color: #06b6a2;"><i class="fas fa-chart-line me-1"></i> Market Shift</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Future Vision Insights Section -->
                    <div id="future-insights" class="insights-section future-insights mb-5">
                        <div class="section-header d-flex align-items-center bg-light p-3 rounded-top border-start border-5" style="border-color: #06b6a2 !important;">
                            <div class="header-icon me-3 text-white p-2 rounded" style="background-color: #06b6a2;">
                                <i class="fas fa-lightbulb fa-lg"></i>
                            </div>
                            <h2 class="mb-0">Future Vision Insights</h2>
                        </div>
                        <div class="insights-grid d-flex flex-nowrap mt-1">
                            <div class="col-4 px-2">
                                <div class="insight-box h-100 card shadow-sm">
                                    <div class="card-header insight-header text-white" style="background-color: #06b6a2;">
                                        <i class="fas fa-robot me-2"></i>
                                        <span class="fw-bold">AI-Driven Networking</span>
                                    </div>
                                    <div class="card-body insight-content">
                                        <h5 class="insight-header-text mb-3">Predictive network management</h5>
                                        <p class="insight-body-text mb-0">Networks will increasingly leverage AI/ML to predict failures, optimize performance, and self-heal, reducing downtime by up to 90% and lowering operational costs significantly for enterprise customers.</p>
                                    </div>
                                    <div class="card-footer text-end bg-white">
                                        <span class="badge rounded-pill" style="background-color: #06b6a2; color: white;"><i class="fas fa-calendar-alt me-1"></i> 2-3 Year Horizon</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 px-2">
                                <div class="insight-box h-100 card shadow-sm">
                                    <div class="card-header insight-header text-white" style="background-color: #06b6a2;">
                                        <i class="fas fa-wifi me-2"></i>
                                        <span class="fw-bold">Edge Computing Expansion</span>
                                    </div>
                                    <div class="card-body insight-content">
                                        <h5 class="insight-header-text mb-3">Distributed intelligence at the edge</h5>
                                        <p class="insight-body-text mb-0">As IoT devices proliferate (projected 75 billion by 2025), processing will move closer to data sources, requiring robust edge computing infrastructure with low-latency networking capabilities to support real-time applications.</p>
                                    </div>
                                    <div class="card-footer text-end bg-white">
                                        <span class="badge rounded-pill" style="background-color: #06b6a2; color: white;"><i class="fas fa-calendar-alt me-1"></i> 1-2 Year Horizon</span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-4 px-2">
                                <div class="insight-box h-100 card shadow-sm">
                                    <div class="card-header insight-header text-white" style="background-color: #06b6a2;">
                                        <i class="fas fa-lock me-2"></i>
                                        <span class="fw-bold">Zero Trust Architecture</span>
                                    </div>
                                    <div class="card-body insight-content">
                                        <h5 class="insight-header-text mb-3">Security paradigm shift</h5>
                                        <p class="insight-body-text mb-0">Organizations will fully embrace zero trust principles, verifying every user and device continuously rather than relying on perimeter defenses, necessitating integrated security throughout the network fabric.</p>
                                    </div>
                                    <div class="card-footer text-end bg-white">
                                        <span class="badge rounded-pill" style="background-color: #06b6a2; color: white;"><i class="fas fa-calendar-alt me-1"></i> Immediate Priority</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Talk Track Section -->
            <div class="row mb-5" id="talk-track">
                <div class="col-lg-3">
                    <div class="sticky-top" style="top: 20px;">
                        <div class="section-label badge mb-3 px-3 py-2" style="background-color: #06b6a2;">CONVERSATION</div>
                        <h2 class="display-6 fw-bold mb-3">Talk Track Generator</h2>
                        <p class="text-muted mb-4">Use our AI-powered suggestions to create meaningful conversations with prospects based on research insights.</p>
                        <div class="d-grid gap-2">
                            <button class="btn btn-lg d-flex align-items-center justify-content-center" style="border: 1px solid #06b6a2; color: #06b6a2;">
                                <i class="fas fa-copy me-2"></i> Copy to Clipboard
                            </button>
                            <button class="btn btn-lg d-flex align-items-center justify-content-center" style="background-color: #06b6a2; color: white;">
                                <i class="fas fa-save me-2"></i> Save to Library
                            </button>
                            <button class="btn btn-success btn-lg d-flex align-items-center justify-content-center">
                                <i class="fas fa-random me-2"></i> Generate Variation
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="talk-track-section card shadow-sm">
                        <div class="card-header bg-light d-flex align-items-center p-3 border-bottom" style="border-color: #06b6a2 !important;">
                            <div class="header-icon me-3 text-white p-2 rounded" style="background-color: #06b6a2;">
                                <i class="fas fa-comment-dots fa-lg"></i>
                            </div>
                            <h2 class="mb-0">Recommended Talk Track</h2>
                            <div class="ms-auto badge" style="background-color: #06b6a2;">Cisco Systems</div>
                        </div>
                        <div class="card-body p-4">
                            <div class="talk-track-box">
                                <div class="d-flex align-items-center mb-4">
                                    <div class="avatar text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 48px; height: 48px; background-color: #06b6a2;">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div>
                                        <h5 class="mb-1">Personalized Conversation Guide</h5>
                                        <div class="text-muted small">Generated on March 12, 2025 â€¢ Based on latest company research</div>
                                    </div>
                                </div>
                                <div class="talk-track-content bg-light p-4 rounded border-start border-4" style="border-color: #06b6a2 !important;">
                                    <div class="mb-3">
                                        <span class="badge bg-secondary mb-2">OPENING</span>
                                        <p id="talk-track-opening" class="mb-0">"I noticed Cisco is making significant investments in transitioning from hardware to subscription-based services. Many of our customers in similar positions have found that this transition creates unique challenges around maintaining network performance while implementing new security architectures, especially in hybrid environments.</p>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <span class="badge bg-secondary mb-2">VALUE PROPOSITION</span>
                                        <p id="talk-track-value" class="mb-0">Our solution has helped several Fortune 500 technology companies reduce network security incidents by 40% while supporting their cloud migration initiatives. For example, when [reference customer] implemented our platform, they were able to maintain consistent security policies across both on-premises and cloud environments without compromising on performance.</p>
                                    </div>
                                    
                                    <div>
                                        <span class="badge bg-secondary mb-2">ENGAGEMENT QUESTION</span>
                                        <p id="talk-track-engagement" class="mb-0">With your focus on expanding your software-defined networking capabilities, I'm curious about your current approach to securing these dynamic environments, particularly as you support customers adopting zero trust architectures. Would it be valuable to discuss how our integrated solution might complement Cisco's strategic direction in this area?"</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="talk-track-metrics d-flex justify-content-around mt-4 text-center">
                                <div class="metric-item">
                                    <div class="metric-icon mb-2">
                                        <i class="fas fa-hourglass-half fa-2x" style="color: #06b6a2;"></i>
                                    </div>
                                    <div class="metric-value fw-bold">1:20</div>
                                    <div class="metric-label text-muted small">EST. DELIVERY TIME</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-icon mb-2">
                                        <i class="fas fa-chart-line fa-2x text-success"></i>
                                    </div>
                                    <div class="metric-value fw-bold">High</div>
                                    <div class="metric-label text-muted small">ENGAGEMENT SCORE</div>
                                </div>
                                <div class="metric-item">
                                    <div class="metric-icon mb-2">
                                        <i class="fas fa-bullseye fa-2x text-danger"></i>
                                    </div>
                                    <div class="metric-value fw-bold">87%</div>
                                    <div class="metric-label text-muted small">RELEVANCE SCORE</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Footer -->
            <footer class="row py-5 mt-5 border-top">
                <div class="col-md-4 mb-4 mb-md-0">
                    <div class="footer-brand mb-3">
                        <i class="fas fa-headset me-2"></i><span class="fw-bold">SDR Assistant</span>
                    </div>
                    <p class="text-muted mb-3">Your AI-powered sales development resource for precise, actionable company insights.</p>
                    <div class="social-icons">
                        <a href="#" class="me-3"><i class="fab fa-twitter fa-lg"></i></a>
                        <a href="#" class="me-3"><i class="fab fa-linkedin fa-lg"></i></a>
                        <a href="#" class="me-3"><i class="fab fa-instagram fa-lg"></i></a>
                        <a href="#"><i class="fab fa-facebook fa-lg"></i></a>
                    </div>
                </div>
                <div class="col-md-2 mb-4 mb-md-0">
                    <h5 class="mb-3">Company</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">About</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">Careers</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">Blog</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">Press</a></li>
                    </ul>
                </div>
                <div class="col-md-2 mb-4 mb-md-0">
                    <h5 class="mb-3">Resources</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">Documentation</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">Guides</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">API Status</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-muted">Community</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h5 class="mb-3">Stay Updated</h5>
                    <p class="text-muted mb-3">Subscribe to our newsletter for the latest updates and insights.</p>
                    <div class="d-flex flex-column flex-sm-row w-100 gap-2">
                        <input type="email" class="form-control" placeholder="Email address">
                        <button class="btn" type="button" style="background-color: #06b6a2; color: white;">Subscribe</button>
                    </div>
                </div>
                <div class="col-12 mt-4 pt-3 border-top">
                    <p class="text-center text-muted mb-0">&copy; 2025 SDR Assistant. All rights reserved.</p>
                </div>
            </footer>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header text-white border-0" style="background-color: #06b6a2;">
                    <div class="d-flex align-items-center">
                        <div class="modal-icon bg-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px; color: #06b6a2;">
                            <i class="fas fa-user-lock"></i>
                        </div>
                        <h5 class="modal-title" id="loginModalLabel">Sign In to Your Account</h5>
                    </div>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <div class="text-center mb-4">
                        <p class="text-muted">Access your personalized SDR Assistant dashboard</p>
                    </div>
                    <form id="loginForm">
                        <div class="mb-4">
                            <label for="email" class="form-label fw-medium">Email address</label>
                            <div class="input-group">
                                <span class="input-group-text bg-light border-end-0">
                                    <i class="fas fa-envelope text-muted"></i>
                                </span>
                                <input type="email" class="form-control bg-light border-start-0" id="email" placeholder="Enter your email" required>
                            </div>
                        </div>
                        <div class="mb-4">
                            <div class="d-flex justify-content-between">
                                <label for="password" class="form-label fw-medium">Password</label>
                                <a href="#" class="small text-decoration-none" style="color: #06b6a2;">Forgot password?</a>
                            </div>
                            <div class="input-group">
                                <span class="input-group-text bg-light border-end-0">
                                    <i class="fas fa-lock text-muted"></i>
                                </span>
                                <input type="password" class="form-control bg-light border-start-0" id="password" placeholder="Enter your password" required>
                            </div>
                        </div>
                        <div class="mb-4 form-check">
                            <input type="checkbox" class="form-check-input" id="rememberMe">
                            <label class="form-check-label" for="rememberMe">Remember me</label>
                        </div>
                        <div id="loginError" class="alert alert-danger d-none mb-4" role="alert"></div>
                    </form>
                </div>
                <div class="modal-footer flex-column border-0 px-4 pb-4 pt-0">
                    <button type="button" class="btn btn-lg w-100 mb-3" style="background-color: #06b6a2; color: white;" onclick="login()">
                        <i class="fas fa-sign-in-alt me-2"></i>Sign In
                    </button>
                    <div class="text-center">
                        <p class="text-muted mb-0">Don't have an account? <a href="#" class="fw-medium" style="color: #06b6a2;">Create Account</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="/js/script.js"></script>
    <script>
        // Ensure the loadAccounts function gets called
        $(document).ready(function() {
            if (typeof loadAccounts === 'function') {
                loadAccounts();
            } else {
                console.error('loadAccounts function not found');
            }
        });
    </script>
    <!-- Simple inline script for updating company logo -->
    <script>
        // Function to directly update company description when Generate Research button is clicked
        async function updateCompanyDescription() {
            // Get the company name from the input field
            const companyName = document.getElementById('accountSelect').value.trim();
            
            if (!companyName) {
                alert('Please enter a company name first');
                return;
            }
            
            console.log('Updating company description for:', companyName);
            
            // Get the paragraph element
            const companyDescriptionParagraph = document.querySelector('p.mb-0');
            
            if (!companyDescriptionParagraph) {
                console.error('Company description paragraph not found');
                return;
            }
            
            // Show loading message
            companyDescriptionParagraph.innerHTML = `<i class="fas fa-circle-notch fa-spin"></i> Loading description for ${companyName}...`;
            
            try {
                // Direct API call to get company metadata
                const response = await fetch('/api/company-metadata', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ companyName: companyName })
                });
                console.log('API request sent to correct endpoint: /api/company-metadata');
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('API response:', data);
                    
                    if (data.success && data.metadata && data.metadata.description && data.metadata.description !== 'Unknown') {
                        // Update the paragraph with the description
                        companyDescriptionParagraph.innerHTML = data.metadata.description;
                        companyDescriptionParagraph.classList.add('highlight-update');
                        setTimeout(() => companyDescriptionParagraph.classList.remove('highlight-update'), 2000);
                        console.log('Successfully updated company description:', data.metadata.description);
                    } else {
                        // Try to get a description from our hardcoded company data
                        const lowerCompanyName = companyName.toLowerCase();
                        let description = null;
                        
                        // Check for common companies
                        if (lowerCompanyName.includes('uber')) {
                            description = 'Uber Technologies, Inc. is an American technology company that offers ride-hailing, food delivery, package delivery, couriers, and freight transportation. Its platforms include Uber, Uber Eats, and Uber Freight.';
                        } else if (lowerCompanyName.includes('starbucks')) {
                            description = 'Starbucks Corporation is an American multinational chain of coffeehouses and roastery reserves. It is the world\'s largest coffeehouse chain, operating over 33,000 stores in 80 countries, offering a variety of coffee drinks, tea, and food items.';
                        } else if (lowerCompanyName.includes('pinterest')) {
                            description = 'Pinterest is an image sharing and social media service designed to enable saving and discovery of information on the internet using images and GIFs. The site allows users to create and manage theme-based image collections called "boards".';
                        } else if (lowerCompanyName.includes('amazon')) {
                            description = 'Amazon.com, Inc. is an American multinational technology company focusing on e-commerce, cloud computing, digital streaming, and artificial intelligence. It is one of the Big Five companies in the U.S. information technology industry.';
                        } else if (lowerCompanyName.includes('netflix')) {
                            description = 'Netflix, Inc. is an American subscription streaming service and production company. It offers a library of films, television series and games through distribution deals and its own productions, Netflix Originals.';
                        } else if (lowerCompanyName.includes('google') || lowerCompanyName.includes('alphabet')) {
                            description = 'Google LLC is an American multinational technology company focusing on search engine technology, online advertising, cloud computing, computer software, quantum computing, e-commerce, and artificial intelligence.';
                        } else {
                            description = `${companyName} is a company that provides products or services in their industry.`;
                        }
                        
                        // Update the paragraph with our description
                        companyDescriptionParagraph.innerHTML = description;
                        companyDescriptionParagraph.classList.add('highlight-update');
                        setTimeout(() => companyDescriptionParagraph.classList.remove('highlight-update'), 2000);
                        console.warn('Using hardcoded description as fallback: ' + description);
                    }
                } else {
                    // Try the hardcoded fallbacks
                    const lowerCompanyName = companyName.toLowerCase();
                    let description = null;
                    
                    // Check for common companies
                    if (lowerCompanyName.includes('uber')) {
                        description = 'Uber Technologies, Inc. is an American technology company that offers ride-hailing, food delivery, package delivery, couriers, and freight transportation. Its platforms include Uber, Uber Eats, and Uber Freight.';
                    } else if (lowerCompanyName.includes('starbucks')) {
                        description = 'Starbucks Corporation is an American multinational chain of coffeehouses and roastery reserves. It is the world\'s largest coffeehouse chain, operating over 33,000 stores in 80 countries, offering a variety of coffee drinks, tea, and food items.';
                    } else if (lowerCompanyName.includes('pinterest')) {
                        description = 'Pinterest is an image sharing and social media service designed to enable saving and discovery of information on the internet using images and GIFs. The site allows users to create and manage theme-based image collections called "boards".';
                    } else {
                        description = `${companyName} is a company that provides products or services in their industry.`;
                    }
                    
                    companyDescriptionParagraph.innerHTML = description;
                    companyDescriptionParagraph.classList.add('highlight-update');
                    setTimeout(() => companyDescriptionParagraph.classList.remove('highlight-update'), 2000);
                    console.error('Error fetching company metadata:', response.statusText);
                    console.warn('Using hardcoded description as fallback');
                }
            } catch (error) {
                // Try the hardcoded fallbacks
                const lowerCompanyName = companyName.toLowerCase();
                let description = null;
                
                // Check for common companies
                if (lowerCompanyName.includes('uber')) {
                    description = 'Uber Technologies, Inc. is an American technology company that offers ride-hailing, food delivery, package delivery, couriers, and freight transportation. Its platforms include Uber, Uber Eats, and Uber Freight.';
                } else if (lowerCompanyName.includes('starbucks')) {
                    description = 'Starbucks Corporation is an American multinational chain of coffeehouses and roastery reserves. It is the world\'s largest coffeehouse chain, operating over 33,000 stores in 80 countries, offering a variety of coffee drinks, tea, and food items.';
                } else if (lowerCompanyName.includes('pinterest')) {
                    description = 'Pinterest is an image sharing and social media service designed to enable saving and discovery of information on the internet using images and GIFs. The site allows users to create and manage theme-based image collections called "boards".';
                } else {
                    description = `${companyName} is a company that provides products or services in their industry.`;
                }
                
                companyDescriptionParagraph.innerHTML = description;
                companyDescriptionParagraph.classList.add('highlight-update');
                setTimeout(() => companyDescriptionParagraph.classList.remove('highlight-update'), 2000);
                console.error('Error updating company description:', error);
                console.warn('Using hardcoded description as fallback');
            }
            
            // Also trigger the regular research generation if available
            if (typeof generateResearch === 'function') {
                generateResearch(companyName);
            }
        }
        
        // Default hero image URL
        const DEFAULT_HERO_IMAGE = 'https://images.unsplash.com/photo-1600880292203-757bb62b4baf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470&q=80';
        
        // Store original image URL once
        let originalImageSrc = null;
        
        // Company data including logos and company details
        const companyData = {
            'nvidia': {
                name: 'NVIDIA Corporation',
                logoUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/21/Nvidia_logo.svg/1200px-Nvidia_logo.svg.png',
                headquarters: 'Santa Clara, California, United States',
                employees: '26,000+',
                marketCap: '$2.2 Trillion',
                founded: '1993',
                description: 'NVIDIA Corporation is an American multinational technology company that designs graphics processing units (GPUs), application programming interface (APIs) for data science and high-performance computing, and system on a chip units (SoCs) for the mobile computing and automotive market. The company has expanded its focus from PC graphics to artificial intelligence, deep learning, and accelerated computing.',
                insights: {
                    company: {
                        financial: {
                            title: 'Explosive growth in AI compute demand',
                            content: 'NVIDIA has seen unprecedented revenue growth driven by demand for AI accelerators, with data center revenue quadrupling year-over-year as enterprises and cloud providers race to build AI infrastructure.',
                            trend: 'positive'
                        },
                        product: {
                            title: 'Expanding beyond GPUs to full-stack AI solutions',
                            content: 'NVIDIA has successfully transformed from a GPU manufacturer to a comprehensive AI platform company with hardware, software frameworks like CUDA and TensorRT, and enterprise solutions through NVIDIA AI Enterprise.',
                            trend: 'positive'
                        },
                        leadership: {
                            title: 'Visionary leadership in AI acceleration',
                            content: 'Under CEO Jensen Huang\'s direction, NVIDIA anticipated the AI revolution and positioned its technology at the center of the AI ecosystem years before competitors, creating substantial competitive advantages.',
                            trend: 'positive'
                        }
                    },
                    industry: [
                        {
                            title: 'AI Infrastructure Scaling Challenges',
                            content: 'The AI infrastructure market faces critical power and cooling challenges, with high-density AI clusters requiring 5-10x more power than traditional data centers, creating substantial opportunities for innovative cooling and power delivery solutions.',
                            type: 'Challenge'
                        },
                        {
                            title: 'Accelerated Computing Adoption',
                            content: 'Enterprise adoption of accelerated computing is expanding beyond AI to scientific computing, digital twins, and simulation workloads, with 68% of Fortune 500 companies planning significant investments in the next 12-18 months.',
                            type: 'Trend'
                        },
                        {
                            title: 'Alternative AI Architectures',
                            content: 'While GPUs currently dominate AI workloads, specialized AI chips optimized for inference, including neuromorphic computing solutions, FPGAs, and custom ASICs, are gaining traction in edge applications where power efficiency is paramount.',
                            type: 'Competition'
                        }
                    ],
                    future: [
                        {
                            title: 'Multi-modal AI Acceleration',
                            content: 'Next-generation AI models will increasingly integrate multiple data types (text, image, video, 3D, sensor) simultaneously, requiring significantly more computational power and specialized acceleration architectures.',
                            type: 'Trend'
                        },
                        {
                            title: 'Autonomous Systems Evolution',
                            content: 'NVIDIA\'s full-stack approach to autonomous systems positions them to expand from automotive into industrial automation, robotics, and smart infrastructure, potentially doubling their total addressable market.',
                            type: 'Opportunity'
                        },
                        {
                            title: 'Decentralized AI Infrastructure',
                            content: 'AI compute infrastructure will increasingly shift toward a mix of cloud and decentralized edge nodes, with 5G/6G enabling distributed AI processing that balances latency, bandwidth, and privacy requirements.',
                            type: 'Disruption'
                        }
                    ]
                }
            },
            'cisco': {
                name: 'Cisco Systems',
                logoUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Cisco_logo_blue_2016.svg/1200px-Cisco_logo_blue_2016.svg.png',
                headquarters: 'San Jose, California, United States',
                employees: '83,300+',
                marketCap: '$212 Billion',
                founded: '1984',
                description: 'Cisco Systems, Inc. designs, manufactures, and sells Internet Protocol based networking and other products related to the communications and information technology industry worldwide. The company offers switching products, including fixed-configuration and modular switches, and storage products that provide connectivity to end users, workstations, IP phones, wireless access points, and servers.',
                insights: {
                    company: {
                        financial: {
                            title: 'Strong recurring revenue growth',
                            content: 'Cisco has been successfully transitioning to a subscription-based model, with software and services now representing over 50% of their revenue, providing more stable and predictable income streams.',
                            trend: 'positive'
                        },
                        product: {
                            title: 'Expanded beyond networking hardware',
                            content: 'While traditionally known for routers and switches, Cisco has diversified into cybersecurity, collaboration tools, and IoT, reducing dependence on hardware sales which are susceptible to market fluctuations.',
                            trend: 'transition'
                        },
                        leadership: {
                            title: 'Strategic executive appointments',
                            content: 'Under CEO Chuck Robbins, Cisco has made strategic executive appointments focused on accelerating software development and cloud-based solutions, signaling their commitment to digital transformation.',
                            trend: 'positive'
                        }
                    },
                    industry: [
                        {
                            title: 'Hybrid cloud adoption accelerating',
                            content: 'Enterprise customers are increasingly adopting hybrid cloud architectures that require sophisticated networking solutions to ensure seamless connectivity and security between on-premises and cloud environments.',
                            type: 'Growing Trend'
                        },
                        {
                            title: 'Rising security concerns with distributed networks',
                            content: 'With the rise of remote work, organizations face expanded attack surfaces, driving 27% annual growth in network security spending according to Gartner, particularly for solutions that integrate with existing network infrastructure.',
                            type: 'Critical Need'
                        },
                        {
                            title: 'SD-WAN market expansion',
                            content: 'The Software-Defined Wide Area Network market is experiencing rapid growth as organizations seek more flexible, cost-effective alternatives to traditional MPLS networks, with the market projected to grow at 34% CAGR through 2026.',
                            type: 'Market Shift'
                        }
                    ],
                    future: [
                        {
                            title: 'Predictive network management',
                            content: 'Networks will increasingly leverage AI/ML to predict failures, optimize performance, and self-heal, reducing downtime by up to 90% and lowering operational costs significantly for enterprise customers.',
                            type: '2-3 Year Horizon'
                        },
                        {
                            title: 'Zero Trust Security Integration',
                            content: 'Network security will evolve toward fully integrated zero trust architectures with continuous verification of all users and devices, regardless of location, driving demand for unified networking and security solutions.',
                            type: 'Security Trend'
                        },
                        {
                            title: 'Network-as-a-Service adoption',
                            content: 'Enterprise network infrastructure will increasingly shift toward consumption-based NaaS models that offer greater flexibility and reduced capital expenditure, potentially disrupting traditional hardware refresh cycles.',
                            type: 'Business Model'
                        }
                    ]
                }
            },
            'microsoft': {
                name: 'Microsoft Corporation',
                logoUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Microsoft_logo.svg/1200px-Microsoft_logo.svg.png',
                headquarters: 'Redmond, Washington, United States',
                employees: '181,000+',
                marketCap: '$2.8 Trillion',
                founded: '1975',
                description: 'Microsoft Corporation is an American multinational technology company that develops, licenses, and supports a wide range of software products, computing devices, and services. The company produces the Windows operating system, Microsoft Office suite, Azure cloud services, and Surface hardware lineup. Microsoft has shifted its focus toward cloud computing, artificial intelligence, and enterprise services in recent years.'
            },
            'google': {
                name: 'Google LLC',
                logoUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Google_2015_logo.svg/1200px-Google_2015_logo.svg.png',
                headquarters: 'Mountain View, California, United States',
                employees: '156,000+',
                marketCap: '$1.7 Trillion',
                founded: '1998',
                description: 'Google LLC is an American multinational technology company that specializes in Internet-related services and products, including online advertising technologies, a search engine, cloud computing, software, and hardware. Google leads the development of the Android mobile operating system and the widely used Chrome web browser. The company has expanded into various areas including AI research, quantum computing, and self-driving cars.'
            },
            'amazon': {
                name: 'Amazon.com, Inc.',
                logoUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Amazon_logo.svg/1200px-Amazon_logo.svg.png',
                headquarters: 'Seattle, Washington, United States',
                employees: '1.5 million+',
                marketCap: '$1.6 Trillion',
                founded: '1994',
                description: 'Amazon.com, Inc. is an American multinational technology company focusing on e-commerce, cloud computing, digital streaming, and artificial intelligence. Amazon is the world\'s largest online marketplace, AI assistant provider, live-streaming platform, and cloud computing platform. The company has expanded into various sectors, including grocery stores, healthcare services, and film and television production.'
            }
        };
        
        // Function to update the insights sections based on company selection
        function updateCompanyInsights(companyValue) {
            console.log('Update company insights function called with:', companyValue);
            
            // Only update if a valid company is selected and has insights data
            if (companyValue && companyData[companyValue] && companyData[companyValue].insights) {
                const insights = companyData[companyValue].insights;
                console.log('Found insights data for company:', companyValue, insights);
                
                // Update company insights
                if (insights.company) {
                    console.log('Updating company insights section');
                    const companyInsightsSection = document.getElementById('company-insights');
                    if (companyInsightsSection) {
                        const insightBoxes = companyInsightsSection.querySelectorAll('.insight-box');
                        console.log('Found company insight boxes:', insightBoxes.length);
                        
                        if (insightBoxes.length >= 3) {
                            // Update the financial insight (first box)
                            let headerText = insightBoxes[0].querySelector('.insight-header-text');
                            let bodyText = insightBoxes[0].querySelector('.insight-body-text');
                            let badge = insightBoxes[0].querySelector('.badge');
                            
                            if (headerText && bodyText) {
                                console.log('Updating financial insight to:', insights.company.financial.title);
                                headerText.textContent = insights.company.financial.title;
                                bodyText.textContent = insights.company.financial.content;
                                
                                if (badge) {
                                    // Set badge class based on trend
                                    const trendClass = insights.company.financial.trend === 'positive' ? 'bg-success' : 
                                                      insights.company.financial.trend === 'negative' ? 'bg-danger' : 'bg-info';
                                    badge.className = 'badge rounded-pill ' + trendClass;
                                    
                                    // Update icon and text
                                    const icon = insights.company.financial.trend === 'positive' ? 'fa-arrow-up' : 
                                               insights.company.financial.trend === 'negative' ? 'fa-arrow-down' : 'fa-sync-alt';
                                    const trendText = insights.company.financial.trend.charAt(0).toUpperCase() + 
                                                     insights.company.financial.trend.slice(1) + ' Trend';
                                    badge.innerHTML = `<i class="fas ${icon} me-1"></i> ${trendText}`;
                                }
                            }
                            
                            // Update the product insight (second box)
                            headerText = insightBoxes[1].querySelector('.insight-header-text');
                            bodyText = insightBoxes[1].querySelector('.insight-body-text');
                            badge = insightBoxes[1].querySelector('.badge');
                            
                            if (headerText && bodyText) {
                                console.log('Updating product insight to:', insights.company.product.title);
                                headerText.textContent = insights.company.product.title;
                                bodyText.textContent = insights.company.product.content;
                                
                                if (badge) {
                                    // Set badge class based on trend
                                    const trendClass = insights.company.product.trend === 'positive' ? 'bg-success' : 
                                                      insights.company.product.trend === 'negative' ? 'bg-danger' : 'bg-info';
                                    badge.className = 'badge rounded-pill ' + trendClass;
                                    
                                    // Update icon and text
                                    const icon = insights.company.product.trend === 'positive' ? 'fa-arrow-up' : 
                                              insights.company.product.trend === 'negative' ? 'fa-arrow-down' : 'fa-sync-alt';
                                    const trendText = insights.company.product.trend.charAt(0).toUpperCase() + 
                                                    insights.company.product.trend.slice(1) + ' Trend';
                                    badge.innerHTML = `<i class="fas ${icon} me-1"></i> ${trendText}`;
                                }
                            }
                            
                            // Update the leadership insight (third box)
                            headerText = insightBoxes[2].querySelector('.insight-header-text');
                            bodyText = insightBoxes[2].querySelector('.insight-body-text');
                            badge = insightBoxes[2].querySelector('.badge');
                            
                            if (headerText && bodyText) {
                                console.log('Updating leadership insight to:', insights.company.leadership.title);
                                headerText.textContent = insights.company.leadership.title;
                                bodyText.textContent = insights.company.leadership.content;
                                
                                if (badge) {
                                    // Set badge class based on trend
                                    const trendClass = insights.company.leadership.trend === 'positive' ? 'bg-success' : 
                                                      insights.company.leadership.trend === 'negative' ? 'bg-danger' : 'bg-info';
                                    badge.className = 'badge rounded-pill ' + trendClass;
                                    
                                    const icon = insights.company.leadership.trend === 'positive' ? 'fa-check' : 
                                               insights.company.leadership.trend === 'negative' ? 'fa-times' : 'fa-info-circle';
                                    badge.innerHTML = `<i class="fas ${icon} me-1"></i> Key Insight`;
                                }
                            }
                        }
                    }
                }
                
                // Update industry insights - only if data exists
                if (insights.industry && insights.industry.length >= 3) {
                    console.log('Updating industry insights section');
                    const industrySection = document.getElementById('industry-insights');
                    if (industrySection) {
                        const insightBoxes = industrySection.querySelectorAll('.insight-box');
                        console.log('Found industry insight boxes:', insightBoxes.length);
                        
                        if (insightBoxes.length >= 3) {
                            // Update each industry insight box
                            for (let i = 0; i < 3; i++) {
                                let headerText = insightBoxes[i].querySelector('.insight-header-text');
                                let bodyText = insightBoxes[i].querySelector('.insight-body-text');
                                let badge = insightBoxes[i].querySelector('.badge');
                                
                                if (headerText && bodyText && insights.industry[i]) {
                                    console.log(`Updating industry insight ${i+1} to:`, insights.industry[i].title);
                                    headerText.textContent = insights.industry[i].title;
                                    bodyText.textContent = insights.industry[i].content;
                                    
                                    // Update badge if it exists
                                    if (badge) {
                                        badge.innerHTML = `<i class="fas fa-info-circle me-1"></i> ${insights.industry[i].type}`;
                                    }
                                }
                            }
                        }
                    }
                }
                
                // Update future insights - only if data exists
                if (insights.future && insights.future.length >= 3) {
                    console.log('Updating future insights section');
                    const futureSection = document.getElementById('future-insights');
                    if (futureSection) {
                        const insightBoxes = futureSection.querySelectorAll('.insight-box');
                        console.log('Found future insight boxes:', insightBoxes.length);
                        
                        if (insightBoxes.length >= 3) {
                            // Update each future insight box
                            for (let i = 0; i < 3; i++) {
                                let headerText = insightBoxes[i].querySelector('.insight-header-text');
                                let bodyText = insightBoxes[i].querySelector('.insight-body-text');
                                let badge = insightBoxes[i].querySelector('.badge');
                                
                                if (headerText && bodyText && insights.future[i]) {
                                    console.log(`Updating future insight ${i+1} to:`, insights.future[i].title);
                                    headerText.textContent = insights.future[i].title;
                                    bodyText.textContent = insights.future[i].content;
                                    
                                    // Update badge if it exists
                                    if (badge) {
                                        badge.innerHTML = `<i class="fas fa-lightbulb me-1"></i> ${insights.future[i].type}`;
                                    }
                                }
                            }
                        }
                    }
                }
            } else {
                console.error('Missing insights data for company:', companyValue);
            }
        }
        
        // Function to update the company details based on selection
        function updateCompanyDetails(companyValue) {
            console.log('Update company details function called with:', companyValue);
            
            // Get company details elements
            const companyNameElement = document.querySelector('.company-name');
            const companyDescriptionElement = document.querySelector('.company-description p');
            const metaValues = document.querySelectorAll('.meta-value');
            
            // Don't proceed if elements aren't found
            if (!companyNameElement || metaValues.length < 4) {
                console.error('Could not find company details elements');
                return;
            }
            
            // Update company details if a valid company is selected
            if (companyValue && companyData[companyValue]) {
                const company = companyData[companyValue];
                console.log('Updating details for company:', company.name);
                
                // Update company name
                companyNameElement.textContent = company.name;
                
                // Update company description
                if (companyDescriptionElement && company.description) {
                    companyDescriptionElement.textContent = company.description;
                }
                
                // Update metadata values (headquarters, employees, market cap, founded)
                metaValues[0].textContent = company.headquarters;
                metaValues[1].textContent = company.employees;
                metaValues[2].textContent = company.marketCap;
                metaValues[3].textContent = company.founded;
                
                // Also update the insights sections
                updateCompanyInsights(companyValue);
            }
        }
        
        // Function to update the logo image based on company name input
        let logoFetchTimeout;
        function updateLogoImage(companyName) {
            console.log('Update logo function called with:', companyName);
            
            const logoImg = document.getElementById('companyLogo');
            if (!logoImg) {
                console.error('Could not find logo image element');
                return;
            }
            
            // Store original image if not already stored
            if (!originalImageSrc) {
                originalImageSrc = logoImg.src;
                console.log('Stored original image URL:', originalImageSrc);
            }
            
            // Clear previous timeout to avoid race conditions
            clearTimeout(logoFetchTimeout);
            
            // If no company name or it's too short, reset to default
            if (!companyName || companyName.length < 2) {
                resetLogoToDefault(logoImg);
                return;
            }
            
            // Check if we have this company in our predefined data
            const lowerCompanyName = companyName.toLowerCase();
            const predefinedKey = Object.keys(companyData).find(key => {
                return key.toLowerCase() === lowerCompanyName || 
                       companyData[key].name.toLowerCase().includes(lowerCompanyName);
            });
            
            if (predefinedKey) {
                // Use predefined company data
                const company = companyData[predefinedKey];
                console.log('Using predefined company data:', company.name);
                logoImg.src = company.logoUrl;
                logoImg.alt = company.name + ' Logo';
                styleLogoContainer(logoImg);
                updateCompanyDetails(predefinedKey);
                return;
            }
            
            // Debounce logo fetching (wait 500ms after typing stops)
            logoFetchTimeout = setTimeout(() => {
                fetchCompanyLogo(companyName, logoImg);
            }, 500);
        }

        // Function to fetch company logo using Clearbit API
        function fetchCompanyLogo(companyName, logoImg) {
            // Format company name for domain guess
            const domainGuess = companyName.toLowerCase()
                .replace(/\s+/g, '')
                .replace(/[^a-z0-9]/g, '');
                
            // Try Clearbit Logo API
            const logoUrl = `https://logo.clearbit.com/${domainGuess}.com`;
            
            // Test if image exists
            const testImg = new Image();
            testImg.onload = function() {
                console.log('Logo found for:', companyName);
                logoImg.src = logoUrl;
                logoImg.alt = companyName + ' Logo';
                styleLogoContainer(logoImg);
            };
            
            testImg.onerror = function() {
                console.log('No logo found for:', companyName);
                // Try with .co domain if .com failed
                const altLogoUrl = `https://logo.clearbit.com/${domainGuess}.co`;
                const altTestImg = new Image();
                
                altTestImg.onload = function() {
                    logoImg.src = altLogoUrl;
                    logoImg.alt = companyName + ' Logo';
                    styleLogoContainer(logoImg);
                };
                
                altTestImg.onerror = function() {
                    // No logo found, reset to default
                    resetLogoToDefault(logoImg);
                };
                
                altTestImg.src = altLogoUrl;
            };
            
            testImg.src = logoUrl;
        }
        
        // Helper function to style logo container
        function styleLogoContainer(logoImg) {
            logoImg.style.objectFit = 'contain';
            logoImg.style.backgroundColor = '#ffffff';
            logoImg.style.padding = '20px';
        }
        
        // Helper function to reset logo to default
        function resetLogoToDefault(logoImg) {
            console.log('Resetting to original image');
            logoImg.src = originalImageSrc || DEFAULT_HERO_IMAGE;
            logoImg.alt = 'Research Team Collaborating';
            logoImg.style.objectFit = '';
            logoImg.style.backgroundColor = '';
            logoImg.style.padding = '';
        }
        
        // Add event listener for dropdown selection change
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM fully loaded');
            
            const selectElement = document.getElementById('accountSelect');
            if (selectElement) {
                console.log('Found account select dropdown');
                
                // Set up the change event listener for the company dropdown
                selectElement.addEventListener('change', function() {
                    const selectedCompany = this.value;
                    console.log('Company selection changed to:', selectedCompany);
                    
                    // Update company details, logo, and insights
                    updateCompanyDetails(selectedCompany);
                    updateLogoImage(selectedCompany);
                });
                
                // Initialize with selected company on page load
                const initialCompany = selectElement.value;
                console.log('Initializing with company:', initialCompany);
                updateCompanyDetails(initialCompany);
                updateLogoImage(initialCompany);
            } else {
                console.error('Could not find account select dropdown');
            }
        });
    </script>
    <!-- Company Metadata JS - Moved to end of body for proper DOM loading -->
    <script src="/static/company-metadata.js"></script>
</body>
</html>
